import{u as se}from"./chunk-C76H5USB-_4XNxVan.js";import{b as k,r as f,ab as ae,u as re,cQ as oe,j as t,cR as l,o as ie,H as le,G as ce,A as D,B as R,L as de}from"./index-BfncdA6x.js";var Se=({data:e=[],columns:r,filters:s,commands:c,action:u,actionMenu:m,getRowId:q,rowCount:E=0,enablePagination:b=!0,enableSearch:p=!0,autoFocusSearch:K=!1,rowHref:h,heading:S,subHeading:C,prefix:i,pageSize:T=10,emptyState:_,rowSelection:B,isLoading:O=!1,layout:Q="auto"})=>{const{t:g}=k(),y=s&&s.length>0,J=c&&c.length>0,P=r.some(n=>n.enableSorting),x=f.useMemo(()=>(s==null?void 0:s.map(n=>n.id))??[],[s]),F=x.map(n=>d(n,i)),{offset:N,order:w,q:L,...M}=se([...x,...P?["order"]:[],...p?["q"]:[],...b?["offset"]:[]],i),[je,j]=ae(),G=f.useMemo(()=>L??"",[L]),V=n=>{j(a=>(n?a.set(d("q",i),n):a.delete(d("q",i)),a))},W=f.useMemo(()=>N?me(N,T):{pageIndex:0,pageSize:T},[N,T]),z=n=>{j(a=>(n.pageIndex===0?a.delete(d("offset",i)):a.set(d("offset",i),ge(n).toString()),a))},U=f.useMemo(()=>he(x,M),[x,M]),X=n=>{j(a=>(Array.from(a.keys()).forEach(o=>{F.includes(o)&&!(o in n)&&a.delete(o)}),Object.entries(n).forEach(([o,A])=>{F.includes(d(o,i))&&A&&a.set(d(o,i),JSON.stringify(A))}),a))},Y=f.useMemo(()=>w?fe(w):null,[w]),Z=n=>{j(a=>{if(n){const o=ue(n);a.set(d("order",i),o)}else a.delete(d("order",i));return a})},{pagination:H,toolbar:v}=xe(),I=re(),ee=f.useCallback((n,a)=>{if(!h)return;const o=h(a);if(n.metaKey||n.ctrlKey||n.button===1){window.open(o,"_blank","noreferrer");return}if(n.shiftKey){window.open(o,void 0,"noreferrer");return}I(o)},[I,h]),te=oe({data:e,columns:r,filters:s,commands:c,rowCount:E,getRowId:q,onRowClick:h?ee:void 0,pagination:b?{state:W,onPaginationChange:z}:void 0,filtering:y?{state:U,onFilteringChange:X}:void 0,sorting:P?{state:Y,onSortingChange:Z}:void 0,search:p?{state:G,onSearchChange:V}:void 0,rowSelection:B,isLoading:O}),ne=S||C;return t.jsxs(l,{instance:te,className:ie({"h-full [&_tr]:last-of-type:!border-b":Q==="fill"}),children:[t.jsxs(l.Toolbar,{className:"flex flex-col items-start justify-between gap-2 md:flex-row md:items-center",translations:v,children:[t.jsxs("div",{className:"flex w-full items-center justify-between gap-2",children:[ne&&t.jsxs("div",{children:[S&&t.jsx(le,{children:S}),C&&t.jsx(ce,{size:"small",className:"text-ui-fg-subtle",children:C})]}),t.jsxs("div",{className:"flex items-center justify-end gap-x-2 md:hidden",children:[y&&t.jsx(l.FilterMenu,{tooltip:g("filters.filterLabel")}),t.jsx(l.SortingMenu,{tooltip:g("filters.sortLabel")}),m&&t.jsx(D,{variant:"primary",...m}),u&&t.jsx($,{...u})]})]}),t.jsxs("div",{className:"flex w-full items-center gap-2 md:justify-end",children:[p&&t.jsx("div",{className:"w-full md:w-auto",children:t.jsx(l.Search,{placeholder:g("filters.searchLabel"),autoFocus:K})}),t.jsxs("div",{className:"hidden items-center gap-x-2 md:flex",children:[y&&t.jsx(l.FilterMenu,{tooltip:g("filters.filterLabel")}),t.jsx(l.SortingMenu,{tooltip:g("filters.sortLabel")}),m&&t.jsx(D,{variant:"primary",...m}),u&&t.jsx($,{...u})]})]})]}),t.jsx(l.Table,{emptyState:_}),b&&t.jsx(l.Pagination,{translations:H}),J&&t.jsx(l.CommandBar,{selectedLabel:n=>`${n} selected`})]})};function ue(e){return e.desc?`-${e.id}`:e.id}function fe(e){return e.startsWith("-")?{id:e.slice(1),desc:!0}:{id:e,desc:!1}}function ge(e){return e.pageIndex*e.pageSize}function me(e,r){const s=parseInt(e);return{pageIndex:Math.floor(s/r),pageSize:r}}function he(e,r){if(!r)return{};const s={};for(const c of e){const u=r[c];u&&(s[c]=JSON.parse(u))}return s}function d(e,r){return r?`${r}_${e}`:e}var xe=()=>{const{t:e}=k(),r={of:e("general.of"),results:e("general.results"),pages:e("general.pages"),prev:e("general.prev"),next:e("general.next")},s={clearAll:e("actions.clearAll")};return{pagination:r,toolbar:s}},$=({label:e,disabled:r,...s})=>{const c={size:"small",disabled:r??!1,type:"button",variant:"secondary"};return"to"in s?t.jsx(R,{...c,asChild:!0,children:t.jsx(de,{to:s.to,children:e})}):t.jsx(R,{...c,onClick:s.onClick,children:e})};export{Se as D};
