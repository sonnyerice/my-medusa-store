import{c as V,g as E}from"./chunk-MWVM4TYO-bKUcYSnf.js";import{b as F,g as L,v as j,r as $,j as e,H as C,T as _,w as s,x as h}from"./index-CzNfOyID.js";import{T}from"./textarea-DFnekcYF.js";import{D as v}from"./date-picker-K5c2QFwR.js";import{R as p}from"./radio-group-C4JY1QLP.js";import{S as u}from"./select-KO8A0rQ7.js";import{C as N}from"./currency-input-DT9dD6Ks.js";var G=({form:a,fieldScope:n=""})=>{var b;const{t}=F(),{store:m}=L(),i=j({control:a.control,name:`${n}budget.type`})==="spend",x=j({control:a.control,name:`${n}budget.currency_code`}),c=j({control:a.control,name:"application_method.currency_code"}),d=x||c;if($.useEffect(()=>{a.setValue(`${n}budget.limit`,null),i?a.setValue("campaign.budget.currency_code",c):a.setValue("campaign.budget.currency_code",null)},[c,i]),c){const r=(b=a.getValues().campaign)==null?void 0:b.budget,o=r==null?void 0:r.currency_code;(r==null?void 0:r.type)==="spend"&&o!==c&&a.setValue("campaign.budget.currency_code",c)}return e.jsxs("div",{className:"flex w-full max-w-[720px] flex-col gap-y-8",children:[e.jsxs("div",{children:[e.jsx(C,{children:t("campaigns.create.header")}),e.jsx(_,{size:"small",className:"text-ui-fg-subtle",children:t("campaigns.create.hint")})]}),e.jsxs("div",{className:"flex flex-col gap-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(s.Field,{control:a.control,name:`${n}name`,render:({field:r})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:t("fields.name")}),e.jsx(s.Control,{children:e.jsx(h,{...r})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:a.control,name:`${n}campaign_identifier`,render:({field:r})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:t("campaigns.fields.identifier")}),e.jsx(s.Control,{children:e.jsx(h,{...r})}),e.jsx(s.ErrorMessage,{})]})})]}),e.jsx(s.Field,{control:a.control,name:`${n}description`,render:({field:r})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{optional:!0,children:t("fields.description")}),e.jsx(s.Control,{children:e.jsx(T,{...r})}),e.jsx(s.ErrorMessage,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(s.Field,{control:a.control,name:`${n}starts_at`,render:({field:r})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{optional:!0,children:t("campaigns.fields.start_date")}),e.jsx(s.Control,{children:e.jsx(v,{granularity:"minute",shouldCloseOnSelect:!1,...r})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:a.control,name:`${n}ends_at`,render:({field:r})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{optional:!0,children:t("campaigns.fields.end_date")}),e.jsx(s.Control,{children:e.jsx(v,{granularity:"minute",shouldCloseOnSelect:!1,...r})}),e.jsx(s.ErrorMessage,{})]})})]}),e.jsxs("div",{children:[e.jsx(C,{children:t("campaigns.budget.create.header")}),e.jsx(_,{size:"small",className:"text-ui-fg-subtle",children:t("campaigns.budget.create.hint")})]}),e.jsx(s.Field,{control:a.control,name:`${n}budget.type`,render:({field:r})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{tooltip:n!=null&&n.length&&!d?t("promotions.tooltips.campaignType"):void 0,children:t("campaigns.budget.fields.type")}),e.jsx(s.Control,{children:e.jsxs(p,{className:"flex gap-y-3",...r,onValueChange:r.onChange,children:[e.jsx(p.ChoiceBox,{value:"usage",label:t("campaigns.budget.type.usage.title"),description:t("campaigns.budget.type.usage.description")}),e.jsx(p.ChoiceBox,{value:"spend",label:t("campaigns.budget.type.spend.title"),description:t("campaigns.budget.type.spend.description"),disabled:n!=null&&n.length?!d:!1})]})}),e.jsx(s.ErrorMessage,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[i&&e.jsx(s.Field,{control:a.control,name:`${n}budget.currency_code`,render:({field:{onChange:r,ref:o,...g}})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{tooltip:n!=null&&n.length&&!d?t("promotions.campaign_currency.tooltip"):void 0,children:t("fields.currency")}),e.jsx(s.Control,{children:e.jsxs(u,{...g,onValueChange:r,disabled:!!n.length,children:[e.jsx(u.Trigger,{ref:o,children:e.jsx(u.Value,{})}),e.jsx(u.Content,{children:Object.values(V).filter(l=>{var y;return!!((y=m==null?void 0:m.supported_currencies)!=null&&y.find(I=>I.currency_code===l.code.toLocaleLowerCase()))}).map(l=>e.jsx(u.Item,{value:l.code.toLowerCase(),children:l.name},l.code))})]})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:a.control,name:`${n}budget.limit`,render:({field:{onChange:r,value:o,...g}})=>e.jsxs(s.Item,{className:"basis-1/2",children:[e.jsx(s.Label,{tooltip:!d&&i?t("promotions.fields.amount.tooltip"):void 0,children:t("campaigns.budget.fields.limit")}),e.jsx(s.Control,{children:i?e.jsx(N,{min:0,onValueChange:l=>r(l?parseInt(l):""),code:x,symbol:x?E(x):"",...g,value:o,disabled:!d&&i}):e.jsx(h,{type:"number",...g,min:0,value:o,onChange:l=>{r(l.target.value===""?null:parseInt(l.target.value))}},"usage")}),e.jsx(s.ErrorMessage,{})]})})]})]})};export{G as C};
