import{u as k,a as T,b as E}from"./chunk-NOAFLTPV-mBc0lAJ0.js";import{u as A,_ as F}from"./chunk-7VJK6HNE-C8-0vX_6.js";import{ae as I,aq as z,ag as B,$ as q,eq as D,j as o,b as H,r as g,al as M,am as K,d0 as L,es as N,t as x,B as S,Q as b,h as O}from"./index-BfncdA6x.js";import"./chunk-Z26G6WFJ-XXa9rFTS.js";import{K as Q}from"./chunk-6HTZNHPT-HMNXWHVt.js";import{R as i,u as V}from"./chunk-4TC5YS65-BRAnZnco.js";import"./chunk-C76H5USB-_4XNxVan.js";import"./chunk-YEDAFXMB-Opelhhmp.js";import"./chunk-M3VFKDXJ-CBn0_yhP.js";import"./chunk-AOFGTNG6-CgbcmpUE.js";import"./chunk-EMIHDNB7-DR-kOaYL.js";import"./chunk-PFKKVLZX-03RQAOan.js";import"./_isIndex-CeB21s9u.js";import"./index-BxvhuQcQ.js";var $=I({countries:z(B()).min(1)}),m=50,p="ac",G=({region:a})=>{const{t:e}=H(),{handleSuccess:r}=V(),[t,c]=g.useState({}),u=M({defaultValues:{countries:[]},resolver:K($)}),{setValue:h}=u;g.useEffect(()=>{const s=Object.keys(t).filter(n=>t[n]);h("countries",s,{shouldDirty:!0,shouldTouch:!0})},[t,h]);const{searchParams:C,raw:_}=k({pageSize:m,prefix:p}),{countries:j,count:y}=T({countries:L.map((s,n)=>({display_name:s.display_name,name:s.name,id:n,iso_2:s.iso_2,iso_3:s.iso_3,num_code:s.num_code,region_id:null,region:{}})),...C}),f=X(),{table:R}=A({data:j||[],columns:f,count:y,enablePagination:!0,enableRowSelection:s=>{var n;return((n=a.countries)==null?void 0:n.findIndex(l=>l.iso_2===s.original.iso_2))===-1},getRowId:s=>s.iso_2,pageSize:m,rowSelection:{state:t,updater:c},prefix:p}),{mutateAsync:v,isPending:P}=N(a.id),w=u.handleSubmit(async s=>{var l;const n=[...((l=a.countries)==null?void 0:l.map(d=>d.iso_2))??[],...s.countries];await v({countries:n},{onSuccess:()=>{x.success(e("regions.toast.countries")),r()},onError:d=>{x.error(d.message)}})});return o.jsx(i.Form,{form:u,children:o.jsxs(Q,{onSubmit:w,className:"flex h-full flex-col overflow-hidden",children:[o.jsx(i.Header,{}),o.jsx(i.Body,{className:"overflow-hidden",children:o.jsx(F,{table:R,columns:f,pageSize:m,count:y,search:"autofocus",pagination:!0,layout:"fill",orderBy:[{key:"display_name",label:e("fields.name")},{key:"iso_2",label:e("fields.code")}],queryObject:_,prefix:p})}),o.jsxs(i.Footer,{children:[o.jsx(i.Close,{asChild:!0,children:o.jsx(S,{size:"small",variant:"secondary",children:e("actions.cancel")})}),o.jsx(S,{size:"small",isLoading:P,type:"submit",children:e("actions.add")})]})]})})},U=O(),X=()=>{const a=E();return g.useMemo(()=>[U.display({id:"select",header:({table:e})=>o.jsx(b,{checked:e.getIsSomePageRowsSelected()?"indeterminate":e.getIsAllPageRowsSelected(),onCheckedChange:r=>e.toggleAllPageRowsSelected(!!r)}),cell:({row:e})=>{const r=!e.getCanSelect();return o.jsx(b,{checked:e.getIsSelected()||r,disabled:r,onCheckedChange:t=>e.toggleSelected(!!t),onClick:t=>{t.stopPropagation()}})}}),...a],[a])},ue=()=>{const{id:a}=q(),{region:e,isPending:r,isError:t,error:c}=D(a,{fields:"*payment_providers"});if(t)throw c;return o.jsx(i,{children:!r&&e&&o.jsx(G,{region:e})})};export{ue as Component};
